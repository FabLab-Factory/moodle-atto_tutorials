
var __cov_AojWIMzrImwRuzTqAtJZiA = (Function('return this'))();
if (!__cov_AojWIMzrImwRuzTqAtJZiA.__coverage__) { __cov_AojWIMzrImwRuzTqAtJZiA.__coverage__ = {}; }
__cov_AojWIMzrImwRuzTqAtJZiA = __cov_AojWIMzrImwRuzTqAtJZiA.__coverage__;
if (!(__cov_AojWIMzrImwRuzTqAtJZiA['build/moodle-atto_tutorials-button/moodle-atto_tutorials-button.js'])) {
   __cov_AojWIMzrImwRuzTqAtJZiA['build/moodle-atto_tutorials-button/moodle-atto_tutorials-button.js'] = {"path":"build/moodle-atto_tutorials-button/moodle-atto_tutorials-button.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":40},"end":{"line":1,"column":59}}},"2":{"name":"contains","line":161,"loc":{"start":{"line":161,"column":0},"end":{"line":161,"column":26}}},"3":{"name":"(anonymous_3)","line":197,"loc":{"start":{"line":197,"column":15},"end":{"line":197,"column":26}}},"4":{"name":"(anonymous_4)","line":261,"loc":{"start":{"line":261,"column":31},"end":{"line":261,"column":49}}},"5":{"name":"(anonymous_5)","line":280,"loc":{"start":{"line":280,"column":20},"end":{"line":280,"column":45}}},"6":{"name":"(anonymous_6)","line":330,"loc":{"start":{"line":330,"column":19},"end":{"line":330,"column":41}}},"7":{"name":"(anonymous_7)","line":356,"loc":{"start":{"line":356,"column":62},"end":{"line":356,"column":74}}},"8":{"name":"(anonymous_8)","line":372,"loc":{"start":{"line":372,"column":14},"end":{"line":372,"column":25}}},"9":{"name":"(anonymous_9)","line":394,"loc":{"start":{"line":394,"column":23},"end":{"line":394,"column":40}}},"10":{"name":"(anonymous_10)","line":422,"loc":{"start":{"line":422,"column":14},"end":{"line":422,"column":26}}},"11":{"name":"(anonymous_11)","line":462,"loc":{"start":{"line":462,"column":23},"end":{"line":462,"column":50}}},"12":{"name":"(anonymous_12)","line":496,"loc":{"start":{"line":496,"column":32},"end":{"line":496,"column":53}}},"13":{"name":"(anonymous_13)","line":516,"loc":{"start":{"line":516,"column":24},"end":{"line":516,"column":39}}},"14":{"name":"(anonymous_14)","line":527,"loc":{"start":{"line":527,"column":25},"end":{"line":527,"column":37}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":558,"column":61}},"2":{"start":{"line":36,"column":0},"end":{"line":36,"column":37}},"3":{"start":{"line":37,"column":0},"end":{"line":37,"column":31}},"4":{"start":{"line":40,"column":0},"end":{"line":42,"column":2}},"5":{"start":{"line":44,"column":0},"end":{"line":48,"column":2}},"6":{"start":{"line":96,"column":0},"end":{"line":112,"column":11}},"7":{"start":{"line":114,"column":0},"end":{"line":134,"column":13}},"8":{"start":{"line":136,"column":0},"end":{"line":144,"column":11}},"9":{"start":{"line":146,"column":0},"end":{"line":159,"column":2}},"10":{"start":{"line":161,"column":0},"end":{"line":168,"column":1}},"11":{"start":{"line":162,"column":4},"end":{"line":166,"column":5}},"12":{"start":{"line":163,"column":8},"end":{"line":165,"column":9}},"13":{"start":{"line":164,"column":12},"end":{"line":164,"column":24}},"14":{"start":{"line":167,"column":4},"end":{"line":167,"column":17}},"15":{"start":{"line":169,"column":0},"end":{"line":169,"column":16}},"16":{"start":{"line":170,"column":0},"end":{"line":170,"column":23}},"17":{"start":{"line":171,"column":0},"end":{"line":555,"column":6}},"18":{"start":{"line":199,"column":4},"end":{"line":201,"column":5}},"19":{"start":{"line":200,"column":6},"end":{"line":200,"column":13}},"20":{"start":{"line":203,"column":4},"end":{"line":203,"column":56}},"21":{"start":{"line":205,"column":4},"end":{"line":221,"column":5}},"22":{"start":{"line":206,"column":6},"end":{"line":209,"column":54}},"23":{"start":{"line":210,"column":6},"end":{"line":218,"column":7}},"24":{"start":{"line":211,"column":8},"end":{"line":217,"column":9}},"25":{"start":{"line":212,"column":10},"end":{"line":216,"column":50}},"26":{"start":{"line":220,"column":6},"end":{"line":220,"column":39}},"27":{"start":{"line":223,"column":4},"end":{"line":259,"column":5}},"28":{"start":{"line":224,"column":6},"end":{"line":258,"column":16}},"29":{"start":{"line":261,"column":4},"end":{"line":270,"column":13}},"30":{"start":{"line":263,"column":6},"end":{"line":269,"column":9}},"31":{"start":{"line":281,"column":4},"end":{"line":281,"column":23}},"32":{"start":{"line":282,"column":4},"end":{"line":282,"column":18}},"33":{"start":{"line":284,"column":4},"end":{"line":284,"column":61}},"34":{"start":{"line":285,"column":4},"end":{"line":287,"column":5}},"35":{"start":{"line":286,"column":8},"end":{"line":286,"column":15}},"36":{"start":{"line":290,"column":4},"end":{"line":290,"column":25}},"37":{"start":{"line":291,"column":4},"end":{"line":295,"column":5}},"38":{"start":{"line":292,"column":6},"end":{"line":292,"column":38}},"39":{"start":{"line":293,"column":11},"end":{"line":295,"column":5}},"40":{"start":{"line":294,"column":6},"end":{"line":294,"column":35}},"41":{"start":{"line":297,"column":4},"end":{"line":301,"column":7}},"42":{"start":{"line":305,"column":4},"end":{"line":307,"column":5}},"43":{"start":{"line":306,"column":6},"end":{"line":306,"column":39}},"44":{"start":{"line":310,"column":4},"end":{"line":310,"column":55}},"45":{"start":{"line":312,"column":4},"end":{"line":312,"column":52}},"46":{"start":{"line":313,"column":4},"end":{"line":313,"column":35}},"47":{"start":{"line":316,"column":4},"end":{"line":316,"column":45}},"48":{"start":{"line":317,"column":4},"end":{"line":317,"column":20}},"49":{"start":{"line":318,"column":4},"end":{"line":318,"column":23}},"50":{"start":{"line":331,"column":4},"end":{"line":364,"column":5}},"51":{"start":{"line":332,"column":6},"end":{"line":338,"column":10}},"52":{"start":{"line":340,"column":6},"end":{"line":340,"column":27}},"53":{"start":{"line":341,"column":6},"end":{"line":341,"column":78}},"54":{"start":{"line":342,"column":6},"end":{"line":342,"column":21}},"55":{"start":{"line":343,"column":11},"end":{"line":364,"column":5}},"56":{"start":{"line":345,"column":6},"end":{"line":346,"column":61}},"57":{"start":{"line":348,"column":8},"end":{"line":352,"column":12}},"58":{"start":{"line":354,"column":8},"end":{"line":354,"column":70}},"59":{"start":{"line":355,"column":8},"end":{"line":360,"column":9}},"60":{"start":{"line":356,"column":12},"end":{"line":359,"column":21}},"61":{"start":{"line":357,"column":16},"end":{"line":357,"column":35}},"62":{"start":{"line":358,"column":16},"end":{"line":358,"column":88}},"63":{"start":{"line":362,"column":8},"end":{"line":362,"column":29}},"64":{"start":{"line":373,"column":4},"end":{"line":373,"column":23}},"65":{"start":{"line":374,"column":4},"end":{"line":376,"column":14}},"66":{"start":{"line":377,"column":4},"end":{"line":377,"column":24}},"67":{"start":{"line":378,"column":4},"end":{"line":378,"column":69}},"68":{"start":{"line":379,"column":4},"end":{"line":379,"column":81}},"69":{"start":{"line":380,"column":4},"end":{"line":380,"column":23}},"70":{"start":{"line":395,"column":4},"end":{"line":397,"column":20}},"71":{"start":{"line":399,"column":4},"end":{"line":412,"column":5}},"72":{"start":{"line":401,"column":6},"end":{"line":402,"column":17}},"73":{"start":{"line":404,"column":6},"end":{"line":404,"column":58}},"74":{"start":{"line":405,"column":6},"end":{"line":405,"column":43}},"75":{"start":{"line":408,"column":8},"end":{"line":408,"column":57}},"76":{"start":{"line":411,"column":8},"end":{"line":411,"column":27}},"77":{"start":{"line":423,"column":6},"end":{"line":426,"column":21}},"78":{"start":{"line":428,"column":6},"end":{"line":428,"column":25}},"79":{"start":{"line":429,"column":6},"end":{"line":431,"column":16}},"80":{"start":{"line":433,"column":6},"end":{"line":433,"column":40}},"81":{"start":{"line":434,"column":6},"end":{"line":434,"column":58}},"82":{"start":{"line":436,"column":6},"end":{"line":436,"column":43}},"83":{"start":{"line":437,"column":6},"end":{"line":437,"column":33}},"84":{"start":{"line":438,"column":6},"end":{"line":451,"column":7}},"85":{"start":{"line":441,"column":10},"end":{"line":441,"column":31}},"86":{"start":{"line":442,"column":10},"end":{"line":442,"column":66}},"87":{"start":{"line":443,"column":10},"end":{"line":445,"column":11}},"88":{"start":{"line":444,"column":14},"end":{"line":444,"column":40}},"89":{"start":{"line":448,"column":10},"end":{"line":448,"column":54}},"90":{"start":{"line":450,"column":10},"end":{"line":450,"column":29}},"91":{"start":{"line":463,"column":6},"end":{"line":467,"column":22}},"92":{"start":{"line":469,"column":6},"end":{"line":469,"column":26}},"93":{"start":{"line":470,"column":6},"end":{"line":470,"column":48}},"94":{"start":{"line":472,"column":6},"end":{"line":487,"column":7}},"95":{"start":{"line":475,"column":10},"end":{"line":475,"column":85}},"96":{"start":{"line":476,"column":10},"end":{"line":476,"column":41}},"97":{"start":{"line":479,"column":10},"end":{"line":479,"column":79}},"98":{"start":{"line":480,"column":10},"end":{"line":480,"column":69}},"99":{"start":{"line":482,"column":10},"end":{"line":482,"column":54}},"100":{"start":{"line":483,"column":10},"end":{"line":483,"column":57}},"101":{"start":{"line":486,"column":10},"end":{"line":486,"column":55}},"102":{"start":{"line":490,"column":6},"end":{"line":492,"column":7}},"103":{"start":{"line":491,"column":10},"end":{"line":491,"column":17}},"104":{"start":{"line":494,"column":6},"end":{"line":494,"column":67}},"105":{"start":{"line":496,"column":6},"end":{"line":503,"column":15}},"106":{"start":{"line":497,"column":10},"end":{"line":497,"column":51}},"107":{"start":{"line":498,"column":10},"end":{"line":502,"column":11}},"108":{"start":{"line":499,"column":14},"end":{"line":499,"column":58}},"109":{"start":{"line":501,"column":14},"end":{"line":501,"column":51}},"110":{"start":{"line":505,"column":6},"end":{"line":505,"column":26}},"111":{"start":{"line":517,"column":6},"end":{"line":518,"column":20}},"112":{"start":{"line":521,"column":6},"end":{"line":523,"column":7}},"113":{"start":{"line":522,"column":10},"end":{"line":522,"column":24}},"114":{"start":{"line":526,"column":6},"end":{"line":526,"column":16}},"115":{"start":{"line":527,"column":6},"end":{"line":531,"column":15}},"116":{"start":{"line":528,"column":10},"end":{"line":530,"column":11}},"117":{"start":{"line":529,"column":14},"end":{"line":529,"column":27}},"118":{"start":{"line":532,"column":6},"end":{"line":534,"column":7}},"119":{"start":{"line":533,"column":10},"end":{"line":533,"column":22}},"120":{"start":{"line":536,"column":6},"end":{"line":536,"column":31}},"121":{"start":{"line":537,"column":6},"end":{"line":539,"column":7}},"122":{"start":{"line":538,"column":10},"end":{"line":538,"column":23}},"123":{"start":{"line":540,"column":6},"end":{"line":540,"column":16}}},"branchMap":{"1":{"line":163,"type":"if","locations":[{"start":{"line":163,"column":8},"end":{"line":163,"column":8}},{"start":{"line":163,"column":8},"end":{"line":163,"column":8}}]},"2":{"line":199,"type":"if","locations":[{"start":{"line":199,"column":4},"end":{"line":199,"column":4}},{"start":{"line":199,"column":4},"end":{"line":199,"column":4}}]},"3":{"line":205,"type":"if","locations":[{"start":{"line":205,"column":4},"end":{"line":205,"column":4}},{"start":{"line":205,"column":4},"end":{"line":205,"column":4}}]},"4":{"line":211,"type":"if","locations":[{"start":{"line":211,"column":8},"end":{"line":211,"column":8}},{"start":{"line":211,"column":8},"end":{"line":211,"column":8}}]},"5":{"line":223,"type":"if","locations":[{"start":{"line":223,"column":4},"end":{"line":223,"column":4}},{"start":{"line":223,"column":4},"end":{"line":223,"column":4}}]},"6":{"line":285,"type":"if","locations":[{"start":{"line":285,"column":4},"end":{"line":285,"column":4}},{"start":{"line":285,"column":4},"end":{"line":285,"column":4}}]},"7":{"line":291,"type":"if","locations":[{"start":{"line":291,"column":4},"end":{"line":291,"column":4}},{"start":{"line":291,"column":4},"end":{"line":291,"column":4}}]},"8":{"line":293,"type":"if","locations":[{"start":{"line":293,"column":11},"end":{"line":293,"column":11}},{"start":{"line":293,"column":11},"end":{"line":293,"column":11}}]},"9":{"line":305,"type":"if","locations":[{"start":{"line":305,"column":4},"end":{"line":305,"column":4}},{"start":{"line":305,"column":4},"end":{"line":305,"column":4}}]},"10":{"line":331,"type":"if","locations":[{"start":{"line":331,"column":4},"end":{"line":331,"column":4}},{"start":{"line":331,"column":4},"end":{"line":331,"column":4}}]},"11":{"line":343,"type":"if","locations":[{"start":{"line":343,"column":11},"end":{"line":343,"column":11}},{"start":{"line":343,"column":11},"end":{"line":343,"column":11}}]},"12":{"line":355,"type":"if","locations":[{"start":{"line":355,"column":8},"end":{"line":355,"column":8}},{"start":{"line":355,"column":8},"end":{"line":355,"column":8}}]},"13":{"line":399,"type":"if","locations":[{"start":{"line":399,"column":4},"end":{"line":399,"column":4}},{"start":{"line":399,"column":4},"end":{"line":399,"column":4}}]},"14":{"line":438,"type":"if","locations":[{"start":{"line":438,"column":6},"end":{"line":438,"column":6}},{"start":{"line":438,"column":6},"end":{"line":438,"column":6}}]},"15":{"line":443,"type":"if","locations":[{"start":{"line":443,"column":10},"end":{"line":443,"column":10}},{"start":{"line":443,"column":10},"end":{"line":443,"column":10}}]},"16":{"line":472,"type":"if","locations":[{"start":{"line":472,"column":6},"end":{"line":472,"column":6}},{"start":{"line":472,"column":6},"end":{"line":472,"column":6}}]},"17":{"line":490,"type":"if","locations":[{"start":{"line":490,"column":6},"end":{"line":490,"column":6}},{"start":{"line":490,"column":6},"end":{"line":490,"column":6}}]},"18":{"line":498,"type":"if","locations":[{"start":{"line":498,"column":10},"end":{"line":498,"column":10}},{"start":{"line":498,"column":10},"end":{"line":498,"column":10}}]},"19":{"line":521,"type":"if","locations":[{"start":{"line":521,"column":6},"end":{"line":521,"column":6}},{"start":{"line":521,"column":6},"end":{"line":521,"column":6}}]},"20":{"line":521,"type":"binary-expr","locations":[{"start":{"line":521,"column":10},"end":{"line":521,"column":17}},{"start":{"line":521,"column":21},"end":{"line":521,"column":50}}]},"21":{"line":528,"type":"if","locations":[{"start":{"line":528,"column":10},"end":{"line":528,"column":10}},{"start":{"line":528,"column":10},"end":{"line":528,"column":10}}]},"22":{"line":528,"type":"binary-expr","locations":[{"start":{"line":528,"column":14},"end":{"line":528,"column":18}},{"start":{"line":528,"column":22},"end":{"line":528,"column":63}}]},"23":{"line":532,"type":"if","locations":[{"start":{"line":532,"column":6},"end":{"line":532,"column":6}},{"start":{"line":532,"column":6},"end":{"line":532,"column":6}}]},"24":{"line":537,"type":"if","locations":[{"start":{"line":537,"column":6},"end":{"line":537,"column":6}},{"start":{"line":537,"column":6},"end":{"line":537,"column":6}}]}},"code":["(function () { YUI.add('moodle-atto_tutorials-button', function (Y, NAME) {","","// This file is part of Moodle - http://moodle.org/","//","// Moodle is free software: you can redistribute it and/or modify","// it under the terms of the GNU General Public License as published by","// the Free Software Foundation, either version 3 of the License, or","// (at your option) any later version.","//","// Moodle is distributed in the hope that it will be useful,","// but WITHOUT ANY WARRANTY; without even the implied warranty of","// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the","// GNU General Public License for more details.","//","// You should have received a copy of the GNU General Public License","// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.","","/*"," * @package    atto_tutorials"," * @copyright  2020 Zimcke Van de Staey <zimcke@fablabfactory.com>"," * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later"," */","","/**"," * @module moodle-atto_tutorials-button"," */","","/**"," * Atto text editor tutorials plugin."," *"," * @namespace M.atto_tutorials"," * @class button"," * @extends M.editor_atto.EditorPlugin"," */","","var COMPONENTNAME = 'atto_tutorials';","var LOGNAME = 'atto_tutorials';","","","var SELECTORS = {","  URLINPUT: '.atto_tutorials_urlentry'","};","","var CSS = {","  INPUTSUBMIT: 'atto_tutorials_selectcolumns',","  NEWWINDOW: 'atto_tutorials_openinnewwindow',","  URLINPUT: 'atto_tutorials_urlentry',","};","","// // The extra div and paragraph tags are there to easily insert additional content before or after the tutorial components.","// var component_two_columns_template =","// '<div class=\"tutorial\">' +","//     '<br>' +","//     '<p> </p>' +","// '</div>' +","//   '<div class=\"tutorial clearfix-tutorial\">' +","//         '<section class=\"component\">' +","//           '<h3>'+M.util.get_string('componenttitle', COMPONENTNAME)+'</h3>' +","//           '<p class=\"max-2-columns\">'+M.util.get_string('placeholdertexttwocolumns', COMPONENTNAME)+'</p>' +","//         '</section>' +","//   '</div>' +","//   '<div class=\"tutorial\">' +","//   '<br>' +","//       '<p> </p>' +","//   '</div>';","","// var component_subcomponent_two_columns_template =","// '<div class=\"tutorial\">' +","//     '<br>' +","//     '<p> </p>' +","// '</div>' +","//     '<div class=\"tutorial clearfix-tutorial\">' +","//         '<section class=\"component\">' +","//           '<h3>'+M.util.get_string('componenttitle', COMPONENTNAME)+'</h3>' +","//           '<br>' + ","//           '<section class=\"subcomponent\">' +","//             '<h4>'+M.util.get_string('subcomponenttitle', COMPONENTNAME)+'</h4>' +","//             '<p class=\"max-2-columns\">'+M.util.get_string('placeholdertexttwocolumns', COMPONENTNAME)+'</p>' +","//           '</section>' +","//           '<br>' + ","//         '</section>' +","//     '</div>' +","//     '<div class=\"tutorial\">' +","//     '<br>' +","//         '<p> </p>' +","//     '</div>';","","// var subcomponent_two_columns_template =","// '<br>' + ","// '<section class=\"subcomponent\">' +","//   '<h4>'+M.util.get_string('subcomponenttitle', COMPONENTNAME)+'</h4>' +","//   '<p class=\"max-2-columns\">'+M.util.get_string('placeholdertexttwocolumns', COMPONENTNAME)+'</p>' +","// '</section>' +","// '<br>';","","var component_one_column_template =","'<div class=\"tutorial\">' +","    '<br>' +","    '<p> </p>' +","'</div>' +","    '<div class=\"tutorial clearfix-tutorial\">' +","        '<section class=\"component\">' +","          '<h3>'+M.util.get_string('componenttitle', COMPONENTNAME)+'</h3>' +","          '<div class=\"no-columns white-background\">' +","            '<p>'+M.util.get_string('placeholdertextonecolumn', COMPONENTNAME)+'</p>' +","          '<div>' +","        '</section>' +","  '</div>' +","  '<div class=\"tutorial\">' +","  '<br>' +","      '<p> </p>' +","  '</div>';","","var component_subcomponent_one_column_template =","'<div class=\"tutorial\">' +","    '<br>' +","'</div>' +","    '<div class=\"tutorial clearfix-tutorial\">' +","        '<section class=\"component\">' +","        '<br>' +","          '<h3>'+M.util.get_string('componenttitle', COMPONENTNAME)+'</h3>' +","          '<section class=\"subcomponent\">' +","            '<h4>'+M.util.get_string('subcomponenttitle', COMPONENTNAME)+'</h4>' +","            '<div class=\"no-columns white-background\">' +","              '<p>'+M.util.get_string('placeholdertextonecolumn', COMPONENTNAME)+'</p>' +","            '</div>' +","          '</section>' +","          '<br>' +","        '</section>' +","    '</div>' +","    '<div class=\"tutorial\">' +","    '<br>' +","        '<p> </p>' +","    '</div>';","","var subcomponent_one_column_template =","    '<br>' + ","    '<section class=\"subcomponent\">' +","      '<h4>'+M.util.get_string('subcomponenttitle', COMPONENTNAME)+'</h4>' +","      '<div class=\"no-columns white-background\">' +","        '<p>'+M.util.get_string('placeholdertextonecolumn', COMPONENTNAME)+'</p>' +","      '</div>' +","    '</section>' +","    '<br>';","","var templates = { ","    // component_two_columns: { template: component_two_columns_template, icon: \"component_two_columns\", ","    //   title: M.util.get_string('component_two_columns', COMPONENTNAME) },","    // component_subcomponent_two_columns: { template: component_subcomponent_two_columns_template, icon: \"component_subcomponent_two_columns\", ","    //   title: M.util.get_string('component_subcomponent_two_columns', COMPONENTNAME) },","    // subcomponent_two_columns: { template: subcomponent_two_columns_template, icon: \"subcomponent_two_columns\",","    //   title: M.util.get_string('subcomponent_two_columns', COMPONENTNAME) },","    component_one_column: { template: component_one_column_template, icon: \"component_one_column\", ","      title: M.util.get_string('component_one_column', COMPONENTNAME) },","    component_subcomponent_one_column: { template: component_subcomponent_one_column_template, icon: \"component_subcomponent_one_column\", ","      title: M.util.get_string('component_subcomponent_one_column', COMPONENTNAME) },","    subcomponent_one_column: { template: subcomponent_one_column_template, icon: \"subcomponent_one_column\",","      title: M.util.get_string('subcomponent_one_column', COMPONENTNAME) }","};","    ","function contains(a, obj) {","    for (var i = 0; i < a.length; i++) {","        if (a[i] === obj) {","            return true;","        }","    }","    return false;","}","var TEMPLATE=\"\";","var BUTTON_TEMPLATE=\"\";","Y.namespace('M.atto_tutorials').Button = Y.Base.create('button', Y.M.editor_atto.EditorPlugin, [], {","","      /**","     * A reference to the current selection at the time that the dialogue","     * was opened.","     *","     * @property _currentSelection","     * @type Range","     * @private","     */","    _currentSelection: null,","","        /**","     * A reference to the dialogue content.","     *","     * @property _content","     * @type Node","     * @private","     */","    _content: null,","","  /**","   * Initialize the button","   *","   * @method Initializer","   */","  initializer: function() {","    // If we don't have the capability to view then give up.","    if (this.get('disabled')){","      return;","    }","","    var editor_icons = ['editor_icon1', 'editor_icon2'];","","    if(TEMPLATE === \"\"){","      TEMPLATE +=","      '<form class=\"atto_form\">' +","      '<div id=\"{{elementid}}_{{innerform}}\" class=\"\">' + // class was mdl-align","      '<p>{{get_string \"description\" component}}</p>';","      for(var t in templates) {","        if(contains(this.get('enabled_templates'),t)) {","          TEMPLATE += '<a class=\"tutorialstemplateicon {{CSS.INPUTSUBMIT}}\" alt=\"' + templates[t].title +  '\" title=\"' +","                      templates[t].title + '\" data-template=\"'+ t + '\">' +","                          '<img src=\"'+ M.util.image_url(\"ed/\" + templates[t].icon,\"atto_tutorials\") + '\"/>' +","                      '</a>' +","                      templates[t].title + '<br>';","        }","      }","","      TEMPLATE += '</div>' + '</form>';","    }","","    if(BUTTON_TEMPLATE === \"\"){","      BUTTON_TEMPLATE +=","      '<form class=\"atto_form\">' +","          '<div class=\"mb-1\">' +","                  '<label for=\"{{elementid}}_atto_link_textentry\">{{get_string \"entertext\" component}}</label>' +","                  '<input class=\"form-control fullwidth atto_button_text\" type=\"text\" ' +","                  'id=\"{{elementid}}_atto_link_textentry\" size=\"32\"/>' +","          '</div>' +","          '{{#if showFilepicker}}' +","              '<label for=\"{{elementid}}_atto_link_urlentry\">{{get_string \"enterurl\" component}}</label>' +","              '<div class=\"input-group input-append w-100 mb-1\">' +","                  '<input class=\"form-control url {{CSS.URLINPUT}}\" type=\"url\" ' +","                  'id=\"{{elementid}}_atto_link_urlentry\"/>' +","                  '<span class=\"input-group-append\">' +","                      '<button class=\"btn btn-secondary openlinkbrowser\" type=\"button\">' +","                      '{{get_string \"browserepositories\" component}}</button>' +","                  '</span>' +","              '</div>' +","          '{{else}}' +","              '<div class=\"mb-1\">' +","                  '<label for=\"{{elementid}}_atto_link_urlentry\">{{get_string \"enterurl\" component}}</label>' +","                  '<input class=\"form-control fullwidth url {{CSS.URLINPUT}}\" type=\"url\" ' +","                  'id=\"{{elementid}}_atto_link_urlentry\" size=\"32\"/>' +","              '</div>' +","          '{{/if}}' +","          '<div class=\"form-check\">' +","              '<input type=\"checkbox\" class=\"form-check-input newwindow\" id=\"{{elementid}}_{{CSS.NEWWINDOW}}\"/>' +","              '<label class=\"form-check-label\" for=\"{{elementid}}_{{CSS.NEWWINDOW}}\">' +","              '{{get_string \"openinnewwindow\" component}}' +","              '</label>' +","          '</div>' +","          '<div class=\"mdl-align\">' +","              '<br/>' +","              '<button type=\"submit\" class=\"btn btn-secondary submit\">{{get_string \"createlink\" component}}</button>' +","          '</div>' +","      '</form>';","    }","","    Y.Array.each(editor_icons, function(theicon) {","      // Add the tutorials icon/buttons","      this.addButton({","        icon: 'ed/' + theicon,","        iconComponent: 'atto_tutorials',","        buttonName: theicon,","        callback: this._displayDialogue,","        callbackArgs: theicon","      });","    }, this);","","  },","","  /**","   * Display the tutorials Dialogue","   *","   * @method _displayDialogue","   * @private","   */","  _displayDialogue: function(e, clickedicon) {","    e.preventDefault();","    var width=500;","","    this._currentSelection = this.get('host').getSelection();","    if (this._currentSelection === false) {","        return;","    }","","    // TODO make dialogtitle dependent on the clicked icon","    var dialogtitle = '';","    if(clickedicon == 'editor_icon1'){","      dialogtitle = 'templates_title';","    } else if (clickedicon == 'editor_icon2'){","      dialogtitle = 'button_title';","    }","","    var dialogue = this.getDialogue({","      headerContent: M.util.get_string(dialogtitle, COMPONENTNAME),","      width: width + 'px',","      focusAfterHide: clickedicon","    });","","    //dialog doesn't detect changes in width without this","    //if you reuse the dialog, this seems necessary","    if(dialogue.width !== width + 'px'){","      dialogue.set('width',width+'px');","    }","","    //append buttons to iframe","    var buttonform = this._getFormContent(clickedicon);","","    var bodycontent =  Y.Node.create('<div></div>');","    bodycontent.append(buttonform);","","    //set to bodycontent","    dialogue.set('bodyContent', bodycontent);","    dialogue.show();","    this.markUpdated();","  },","","","  /**","   * Return the dialogue content for the tool, attaching any required","   * events.","   *","   * @method _getDialogueContent","   * @return {Node} The content to place in the dialogue.","   * @private","   */","  _getFormContent: function(clickedicon) {","    if(clickedicon == 'editor_icon1'){","      var template = Y.Handlebars.compile(TEMPLATE),","      content = Y.Node.create(template({","        elementid: this.get('host').get('elementid'),","        CSS: CSS,","        component: COMPONENTNAME,","        clickedicon: clickedicon","      }));","","      this._form = content;","      this._form.all('.' + CSS.INPUTSUBMIT).on('click', this._doInsert, this);","      return content;","    } else if(clickedicon == 'editor_icon2') {","","      var canShowFilepicker = this.get('host').canShowFilepicker('link'),","            template = Y.Handlebars.compile(BUTTON_TEMPLATE);","","        this._content = Y.Node.create(template({","            showFilepicker: canShowFilepicker,","            component: COMPONENTNAME,","            CSS: CSS","        }));","","        this._content.one('.submit').on('click', this._setLink, this);","        if (canShowFilepicker) {","            this._content.one('.openlinkbrowser').on('click', function(e) {","                e.preventDefault();","                this.get('host').showFilepicker('link', this._filepickerCallback, this);","            }, this);","        }","","        return this._content;","","    }","  },","","  /**","   * Inserts the users input onto the page","   * @method _getDialogueContent","   * @private","   */","  _doInsert : function(e){","    e.preventDefault();","    this.getDialogue({","      focusAfterHide: null","    }).hide();","    this.editor.focus();","    var templateName = e.currentTarget.getAttribute('data-template');","    this.get('host').insertContentAtFocusPoint(templates[templateName].template);","    this.markUpdated();","","  },","","","  /** Link helper functions */","  /** ","    * Update the dialogue after a link was selected in the File Picker.","    *","    * @method _filepickerCallback","    * @param {object} params The parameters provided by the filepicker","    * containing information about the link.","    * @private","    */","  _filepickerCallback: function(params) {","    this.getDialogue()","            .set('focusAfterHide', null)","            .hide();","","    if (params.url !== '') {","","      var input_text,","      value_text;","","      input_text = this._content.one('.atto_button_text');","      value_text = input_text.get('value');","","        // Add the link.","        this._setLinkOnSelection(params.url, value_text);","","        // And mark the text area as updated.","        this.markUpdated();","    }","  },","","  /**","     * The link was inserted, so make changes to the editor source.","     *","     * @method _setLink","     * @param {EventFacade} e","     * @private","     */","    _setLink: function(e) {","      var input, ","      input_text,","          value,","          value_text;","","      e.preventDefault();","      this.getDialogue({","          focusAfterHide: null","      }).hide();","","      input = this._content.one('.url');","      input_text = this._content.one('.atto_button_text');","","      value_text = input_text.get('value');","      value = input.get('value');","      if (value !== '') {","","          // We add a prefix if it is not already prefixed.","          value = value.trim();","          var expr = new RegExp(/^[a-zA-Z]*\\.*\\/|^#|^[a-zA-Z]*:/);","          if (!expr.test(value)) {","              value = 'http://' + value;","          }","","          // Add the link.","          this._setLinkOnSelection(value, value_text);","","          this.markUpdated();","      }","  },","","  /**","   * Final step setting the anchor on the selection.","   *","   * @private","   * @method _setLinkOnSelection","   * @param  {String} url URL the link will point to.","   * @return {Node} The added Node.","   */","  _setLinkOnSelection: function(url, button_text) {","      var host = this.get('host'),","          link,","          selectednode,","          target,","          anchornodes;","","      this.editor.focus();","      host.setSelection(this._currentSelection);","","      if (this._currentSelection[0].collapsed) {","","          // Firefox cannot add links when the selection is empty so we will add it manually.","          link = Y.Node.create('<a class=\"download-button\">' + button_text + '</a>');","          link.setAttribute('href', url);","","          // Add the node and select it to replicate the behaviour of execCommand.","          selectednode = host.insertContentAtFocusPoint(link.get('outerHTML'));","          host.setSelection(host.getSelectionFromNode(selectednode));","      } else {","          document.execCommand('unlink', false, null);","          document.execCommand('createLink', false, url);","","          // Now set the target.","          selectednode = host.getSelectionParentNode();","      }","","      // Note this is a document fragment and YUI doesn't like them.","      if (!selectednode) {","          return;","      }","","      anchornodes = this._findSelectedAnchors(Y.one(selectednode));","      // Add new window attributes if requested.","      Y.Array.each(anchornodes, function(anchornode) {","          target = this._content.one('.newwindow');","          if (target.get('checked')) {","              anchornode.setAttribute('target', '_blank');","          } else {","              anchornode.removeAttribute('target');","          }","      }, this);","","      return selectednode;","  },","","  /**","   * Look up and down for the nearest anchor tags that are least partly contained in the selection.","   *","   * @method _findSelectedAnchors","   * @param {Node} node The node to search under for the selected anchor.","   * @return {Node|Boolean} The Node, or false if not found.","   * @private","   */","  _findSelectedAnchors: function(node) {","      var tagname = node.get('tagName'),","          hit, hits;","","      // Direct hit.","      if (tagname && tagname.toLowerCase() === 'a') {","          return [node];","      }","","      // Search down but check that each node is part of the selection.","      hits = [];","      node.all('a').each(function(n) {","          if (!hit && this.get('host').selectionContainsNode(n)) {","              hits.push(n);","          }","      }, this);","      if (hits.length > 0) {","          return hits;","      }","      // Search up.","      hit = node.ancestor('a');","      if (hit) {","          return [hit];","      }","      return [];","  },","","","}, { ATTRS: {","  enabled_templates: {","    values: [","        // 'component_two_columns',","        // 'component_subcomponent_two_columns',","        // 'subcomponent_two_columns',","        'component_one_column',","        'component_subcomponent_one_column',","        'subcomponent_one_column']","  }","}","   });","","","}, '@VERSION@', {\"requires\": [\"moodle-editor_atto-plugin\"]});","","}());"]};
}
__cov_AojWIMzrImwRuzTqAtJZiA = __cov_AojWIMzrImwRuzTqAtJZiA['build/moodle-atto_tutorials-button/moodle-atto_tutorials-button.js'];
__cov_AojWIMzrImwRuzTqAtJZiA.s['1']++;YUI.add('moodle-atto_tutorials-button',function(Y,NAME){__cov_AojWIMzrImwRuzTqAtJZiA.f['1']++;__cov_AojWIMzrImwRuzTqAtJZiA.s['2']++;var COMPONENTNAME='atto_tutorials';__cov_AojWIMzrImwRuzTqAtJZiA.s['3']++;var LOGNAME='atto_tutorials';__cov_AojWIMzrImwRuzTqAtJZiA.s['4']++;var SELECTORS={URLINPUT:'.atto_tutorials_urlentry'};__cov_AojWIMzrImwRuzTqAtJZiA.s['5']++;var CSS={INPUTSUBMIT:'atto_tutorials_selectcolumns',NEWWINDOW:'atto_tutorials_openinnewwindow',URLINPUT:'atto_tutorials_urlentry'};__cov_AojWIMzrImwRuzTqAtJZiA.s['6']++;var component_one_column_template='<div class="tutorial">'+'<br>'+'<p> </p>'+'</div>'+'<div class="tutorial clearfix-tutorial">'+'<section class="component">'+'<h3>'+M.util.get_string('componenttitle',COMPONENTNAME)+'</h3>'+'<div class="no-columns white-background">'+'<p>'+M.util.get_string('placeholdertextonecolumn',COMPONENTNAME)+'</p>'+'<div>'+'</section>'+'</div>'+'<div class="tutorial">'+'<br>'+'<p> </p>'+'</div>';__cov_AojWIMzrImwRuzTqAtJZiA.s['7']++;var component_subcomponent_one_column_template='<div class="tutorial">'+'<br>'+'</div>'+'<div class="tutorial clearfix-tutorial">'+'<section class="component">'+'<br>'+'<h3>'+M.util.get_string('componenttitle',COMPONENTNAME)+'</h3>'+'<section class="subcomponent">'+'<h4>'+M.util.get_string('subcomponenttitle',COMPONENTNAME)+'</h4>'+'<div class="no-columns white-background">'+'<p>'+M.util.get_string('placeholdertextonecolumn',COMPONENTNAME)+'</p>'+'</div>'+'</section>'+'<br>'+'</section>'+'</div>'+'<div class="tutorial">'+'<br>'+'<p> </p>'+'</div>';__cov_AojWIMzrImwRuzTqAtJZiA.s['8']++;var subcomponent_one_column_template='<br>'+'<section class="subcomponent">'+'<h4>'+M.util.get_string('subcomponenttitle',COMPONENTNAME)+'</h4>'+'<div class="no-columns white-background">'+'<p>'+M.util.get_string('placeholdertextonecolumn',COMPONENTNAME)+'</p>'+'</div>'+'</section>'+'<br>';__cov_AojWIMzrImwRuzTqAtJZiA.s['9']++;var templates={component_one_column:{template:component_one_column_template,icon:'component_one_column',title:M.util.get_string('component_one_column',COMPONENTNAME)},component_subcomponent_one_column:{template:component_subcomponent_one_column_template,icon:'component_subcomponent_one_column',title:M.util.get_string('component_subcomponent_one_column',COMPONENTNAME)},subcomponent_one_column:{template:subcomponent_one_column_template,icon:'subcomponent_one_column',title:M.util.get_string('subcomponent_one_column',COMPONENTNAME)}};function contains(a,obj){__cov_AojWIMzrImwRuzTqAtJZiA.f['2']++;__cov_AojWIMzrImwRuzTqAtJZiA.s['11']++;for(var i=0;i<a.length;i++){__cov_AojWIMzrImwRuzTqAtJZiA.s['12']++;if(a[i]===obj){__cov_AojWIMzrImwRuzTqAtJZiA.b['1'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['13']++;return true;}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['1'][1]++;}}__cov_AojWIMzrImwRuzTqAtJZiA.s['14']++;return false;}__cov_AojWIMzrImwRuzTqAtJZiA.s['15']++;var TEMPLATE='';__cov_AojWIMzrImwRuzTqAtJZiA.s['16']++;var BUTTON_TEMPLATE='';__cov_AojWIMzrImwRuzTqAtJZiA.s['17']++;Y.namespace('M.atto_tutorials').Button=Y.Base.create('button',Y.M.editor_atto.EditorPlugin,[],{_currentSelection:null,_content:null,initializer:function(){__cov_AojWIMzrImwRuzTqAtJZiA.f['3']++;__cov_AojWIMzrImwRuzTqAtJZiA.s['18']++;if(this.get('disabled')){__cov_AojWIMzrImwRuzTqAtJZiA.b['2'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['19']++;return;}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['2'][1]++;}__cov_AojWIMzrImwRuzTqAtJZiA.s['20']++;var editor_icons=['editor_icon1','editor_icon2'];__cov_AojWIMzrImwRuzTqAtJZiA.s['21']++;if(TEMPLATE===''){__cov_AojWIMzrImwRuzTqAtJZiA.b['3'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['22']++;TEMPLATE+='<form class="atto_form">'+'<div id="{{elementid}}_{{innerform}}" class="">'+'<p>{{get_string "description" component}}</p>';__cov_AojWIMzrImwRuzTqAtJZiA.s['23']++;for(var t in templates){__cov_AojWIMzrImwRuzTqAtJZiA.s['24']++;if(contains(this.get('enabled_templates'),t)){__cov_AojWIMzrImwRuzTqAtJZiA.b['4'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['25']++;TEMPLATE+='<a class="tutorialstemplateicon {{CSS.INPUTSUBMIT}}" alt="'+templates[t].title+'" title="'+templates[t].title+'" data-template="'+t+'">'+'<img src="'+M.util.image_url('ed/'+templates[t].icon,'atto_tutorials')+'"/>'+'</a>'+templates[t].title+'<br>';}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['4'][1]++;}}__cov_AojWIMzrImwRuzTqAtJZiA.s['26']++;TEMPLATE+='</div>'+'</form>';}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['3'][1]++;}__cov_AojWIMzrImwRuzTqAtJZiA.s['27']++;if(BUTTON_TEMPLATE===''){__cov_AojWIMzrImwRuzTqAtJZiA.b['5'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['28']++;BUTTON_TEMPLATE+='<form class="atto_form">'+'<div class="mb-1">'+'<label for="{{elementid}}_atto_link_textentry">{{get_string "entertext" component}}</label>'+'<input class="form-control fullwidth atto_button_text" type="text" '+'id="{{elementid}}_atto_link_textentry" size="32"/>'+'</div>'+'{{#if showFilepicker}}'+'<label for="{{elementid}}_atto_link_urlentry">{{get_string "enterurl" component}}</label>'+'<div class="input-group input-append w-100 mb-1">'+'<input class="form-control url {{CSS.URLINPUT}}" type="url" '+'id="{{elementid}}_atto_link_urlentry"/>'+'<span class="input-group-append">'+'<button class="btn btn-secondary openlinkbrowser" type="button">'+'{{get_string "browserepositories" component}}</button>'+'</span>'+'</div>'+'{{else}}'+'<div class="mb-1">'+'<label for="{{elementid}}_atto_link_urlentry">{{get_string "enterurl" component}}</label>'+'<input class="form-control fullwidth url {{CSS.URLINPUT}}" type="url" '+'id="{{elementid}}_atto_link_urlentry" size="32"/>'+'</div>'+'{{/if}}'+'<div class="form-check">'+'<input type="checkbox" class="form-check-input newwindow" id="{{elementid}}_{{CSS.NEWWINDOW}}"/>'+'<label class="form-check-label" for="{{elementid}}_{{CSS.NEWWINDOW}}">'+'{{get_string "openinnewwindow" component}}'+'</label>'+'</div>'+'<div class="mdl-align">'+'<br/>'+'<button type="submit" class="btn btn-secondary submit">{{get_string "createlink" component}}</button>'+'</div>'+'</form>';}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['5'][1]++;}__cov_AojWIMzrImwRuzTqAtJZiA.s['29']++;Y.Array.each(editor_icons,function(theicon){__cov_AojWIMzrImwRuzTqAtJZiA.f['4']++;__cov_AojWIMzrImwRuzTqAtJZiA.s['30']++;this.addButton({icon:'ed/'+theicon,iconComponent:'atto_tutorials',buttonName:theicon,callback:this._displayDialogue,callbackArgs:theicon});},this);},_displayDialogue:function(e,clickedicon){__cov_AojWIMzrImwRuzTqAtJZiA.f['5']++;__cov_AojWIMzrImwRuzTqAtJZiA.s['31']++;e.preventDefault();__cov_AojWIMzrImwRuzTqAtJZiA.s['32']++;var width=500;__cov_AojWIMzrImwRuzTqAtJZiA.s['33']++;this._currentSelection=this.get('host').getSelection();__cov_AojWIMzrImwRuzTqAtJZiA.s['34']++;if(this._currentSelection===false){__cov_AojWIMzrImwRuzTqAtJZiA.b['6'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['35']++;return;}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['6'][1]++;}__cov_AojWIMzrImwRuzTqAtJZiA.s['36']++;var dialogtitle='';__cov_AojWIMzrImwRuzTqAtJZiA.s['37']++;if(clickedicon=='editor_icon1'){__cov_AojWIMzrImwRuzTqAtJZiA.b['7'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['38']++;dialogtitle='templates_title';}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['7'][1]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['39']++;if(clickedicon=='editor_icon2'){__cov_AojWIMzrImwRuzTqAtJZiA.b['8'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['40']++;dialogtitle='button_title';}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['8'][1]++;}}__cov_AojWIMzrImwRuzTqAtJZiA.s['41']++;var dialogue=this.getDialogue({headerContent:M.util.get_string(dialogtitle,COMPONENTNAME),width:width+'px',focusAfterHide:clickedicon});__cov_AojWIMzrImwRuzTqAtJZiA.s['42']++;if(dialogue.width!==width+'px'){__cov_AojWIMzrImwRuzTqAtJZiA.b['9'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['43']++;dialogue.set('width',width+'px');}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['9'][1]++;}__cov_AojWIMzrImwRuzTqAtJZiA.s['44']++;var buttonform=this._getFormContent(clickedicon);__cov_AojWIMzrImwRuzTqAtJZiA.s['45']++;var bodycontent=Y.Node.create('<div></div>');__cov_AojWIMzrImwRuzTqAtJZiA.s['46']++;bodycontent.append(buttonform);__cov_AojWIMzrImwRuzTqAtJZiA.s['47']++;dialogue.set('bodyContent',bodycontent);__cov_AojWIMzrImwRuzTqAtJZiA.s['48']++;dialogue.show();__cov_AojWIMzrImwRuzTqAtJZiA.s['49']++;this.markUpdated();},_getFormContent:function(clickedicon){__cov_AojWIMzrImwRuzTqAtJZiA.f['6']++;__cov_AojWIMzrImwRuzTqAtJZiA.s['50']++;if(clickedicon=='editor_icon1'){__cov_AojWIMzrImwRuzTqAtJZiA.b['10'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['51']++;var template=Y.Handlebars.compile(TEMPLATE),content=Y.Node.create(template({elementid:this.get('host').get('elementid'),CSS:CSS,component:COMPONENTNAME,clickedicon:clickedicon}));__cov_AojWIMzrImwRuzTqAtJZiA.s['52']++;this._form=content;__cov_AojWIMzrImwRuzTqAtJZiA.s['53']++;this._form.all('.'+CSS.INPUTSUBMIT).on('click',this._doInsert,this);__cov_AojWIMzrImwRuzTqAtJZiA.s['54']++;return content;}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['10'][1]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['55']++;if(clickedicon=='editor_icon2'){__cov_AojWIMzrImwRuzTqAtJZiA.b['11'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['56']++;var canShowFilepicker=this.get('host').canShowFilepicker('link'),template=Y.Handlebars.compile(BUTTON_TEMPLATE);__cov_AojWIMzrImwRuzTqAtJZiA.s['57']++;this._content=Y.Node.create(template({showFilepicker:canShowFilepicker,component:COMPONENTNAME,CSS:CSS}));__cov_AojWIMzrImwRuzTqAtJZiA.s['58']++;this._content.one('.submit').on('click',this._setLink,this);__cov_AojWIMzrImwRuzTqAtJZiA.s['59']++;if(canShowFilepicker){__cov_AojWIMzrImwRuzTqAtJZiA.b['12'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['60']++;this._content.one('.openlinkbrowser').on('click',function(e){__cov_AojWIMzrImwRuzTqAtJZiA.f['7']++;__cov_AojWIMzrImwRuzTqAtJZiA.s['61']++;e.preventDefault();__cov_AojWIMzrImwRuzTqAtJZiA.s['62']++;this.get('host').showFilepicker('link',this._filepickerCallback,this);},this);}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['12'][1]++;}__cov_AojWIMzrImwRuzTqAtJZiA.s['63']++;return this._content;}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['11'][1]++;}}},_doInsert:function(e){__cov_AojWIMzrImwRuzTqAtJZiA.f['8']++;__cov_AojWIMzrImwRuzTqAtJZiA.s['64']++;e.preventDefault();__cov_AojWIMzrImwRuzTqAtJZiA.s['65']++;this.getDialogue({focusAfterHide:null}).hide();__cov_AojWIMzrImwRuzTqAtJZiA.s['66']++;this.editor.focus();__cov_AojWIMzrImwRuzTqAtJZiA.s['67']++;var templateName=e.currentTarget.getAttribute('data-template');__cov_AojWIMzrImwRuzTqAtJZiA.s['68']++;this.get('host').insertContentAtFocusPoint(templates[templateName].template);__cov_AojWIMzrImwRuzTqAtJZiA.s['69']++;this.markUpdated();},_filepickerCallback:function(params){__cov_AojWIMzrImwRuzTqAtJZiA.f['9']++;__cov_AojWIMzrImwRuzTqAtJZiA.s['70']++;this.getDialogue().set('focusAfterHide',null).hide();__cov_AojWIMzrImwRuzTqAtJZiA.s['71']++;if(params.url!==''){__cov_AojWIMzrImwRuzTqAtJZiA.b['13'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['72']++;var input_text,value_text;__cov_AojWIMzrImwRuzTqAtJZiA.s['73']++;input_text=this._content.one('.atto_button_text');__cov_AojWIMzrImwRuzTqAtJZiA.s['74']++;value_text=input_text.get('value');__cov_AojWIMzrImwRuzTqAtJZiA.s['75']++;this._setLinkOnSelection(params.url,value_text);__cov_AojWIMzrImwRuzTqAtJZiA.s['76']++;this.markUpdated();}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['13'][1]++;}},_setLink:function(e){__cov_AojWIMzrImwRuzTqAtJZiA.f['10']++;__cov_AojWIMzrImwRuzTqAtJZiA.s['77']++;var input,input_text,value,value_text;__cov_AojWIMzrImwRuzTqAtJZiA.s['78']++;e.preventDefault();__cov_AojWIMzrImwRuzTqAtJZiA.s['79']++;this.getDialogue({focusAfterHide:null}).hide();__cov_AojWIMzrImwRuzTqAtJZiA.s['80']++;input=this._content.one('.url');__cov_AojWIMzrImwRuzTqAtJZiA.s['81']++;input_text=this._content.one('.atto_button_text');__cov_AojWIMzrImwRuzTqAtJZiA.s['82']++;value_text=input_text.get('value');__cov_AojWIMzrImwRuzTqAtJZiA.s['83']++;value=input.get('value');__cov_AojWIMzrImwRuzTqAtJZiA.s['84']++;if(value!==''){__cov_AojWIMzrImwRuzTqAtJZiA.b['14'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['85']++;value=value.trim();__cov_AojWIMzrImwRuzTqAtJZiA.s['86']++;var expr=new RegExp(/^[a-zA-Z]*\.*\/|^#|^[a-zA-Z]*:/);__cov_AojWIMzrImwRuzTqAtJZiA.s['87']++;if(!expr.test(value)){__cov_AojWIMzrImwRuzTqAtJZiA.b['15'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['88']++;value='http://'+value;}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['15'][1]++;}__cov_AojWIMzrImwRuzTqAtJZiA.s['89']++;this._setLinkOnSelection(value,value_text);__cov_AojWIMzrImwRuzTqAtJZiA.s['90']++;this.markUpdated();}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['14'][1]++;}},_setLinkOnSelection:function(url,button_text){__cov_AojWIMzrImwRuzTqAtJZiA.f['11']++;__cov_AojWIMzrImwRuzTqAtJZiA.s['91']++;var host=this.get('host'),link,selectednode,target,anchornodes;__cov_AojWIMzrImwRuzTqAtJZiA.s['92']++;this.editor.focus();__cov_AojWIMzrImwRuzTqAtJZiA.s['93']++;host.setSelection(this._currentSelection);__cov_AojWIMzrImwRuzTqAtJZiA.s['94']++;if(this._currentSelection[0].collapsed){__cov_AojWIMzrImwRuzTqAtJZiA.b['16'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['95']++;link=Y.Node.create('<a class="download-button">'+button_text+'</a>');__cov_AojWIMzrImwRuzTqAtJZiA.s['96']++;link.setAttribute('href',url);__cov_AojWIMzrImwRuzTqAtJZiA.s['97']++;selectednode=host.insertContentAtFocusPoint(link.get('outerHTML'));__cov_AojWIMzrImwRuzTqAtJZiA.s['98']++;host.setSelection(host.getSelectionFromNode(selectednode));}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['16'][1]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['99']++;document.execCommand('unlink',false,null);__cov_AojWIMzrImwRuzTqAtJZiA.s['100']++;document.execCommand('createLink',false,url);__cov_AojWIMzrImwRuzTqAtJZiA.s['101']++;selectednode=host.getSelectionParentNode();}__cov_AojWIMzrImwRuzTqAtJZiA.s['102']++;if(!selectednode){__cov_AojWIMzrImwRuzTqAtJZiA.b['17'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['103']++;return;}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['17'][1]++;}__cov_AojWIMzrImwRuzTqAtJZiA.s['104']++;anchornodes=this._findSelectedAnchors(Y.one(selectednode));__cov_AojWIMzrImwRuzTqAtJZiA.s['105']++;Y.Array.each(anchornodes,function(anchornode){__cov_AojWIMzrImwRuzTqAtJZiA.f['12']++;__cov_AojWIMzrImwRuzTqAtJZiA.s['106']++;target=this._content.one('.newwindow');__cov_AojWIMzrImwRuzTqAtJZiA.s['107']++;if(target.get('checked')){__cov_AojWIMzrImwRuzTqAtJZiA.b['18'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['108']++;anchornode.setAttribute('target','_blank');}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['18'][1]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['109']++;anchornode.removeAttribute('target');}},this);__cov_AojWIMzrImwRuzTqAtJZiA.s['110']++;return selectednode;},_findSelectedAnchors:function(node){__cov_AojWIMzrImwRuzTqAtJZiA.f['13']++;__cov_AojWIMzrImwRuzTqAtJZiA.s['111']++;var tagname=node.get('tagName'),hit,hits;__cov_AojWIMzrImwRuzTqAtJZiA.s['112']++;if((__cov_AojWIMzrImwRuzTqAtJZiA.b['20'][0]++,tagname)&&(__cov_AojWIMzrImwRuzTqAtJZiA.b['20'][1]++,tagname.toLowerCase()==='a')){__cov_AojWIMzrImwRuzTqAtJZiA.b['19'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['113']++;return[node];}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['19'][1]++;}__cov_AojWIMzrImwRuzTqAtJZiA.s['114']++;hits=[];__cov_AojWIMzrImwRuzTqAtJZiA.s['115']++;node.all('a').each(function(n){__cov_AojWIMzrImwRuzTqAtJZiA.f['14']++;__cov_AojWIMzrImwRuzTqAtJZiA.s['116']++;if((__cov_AojWIMzrImwRuzTqAtJZiA.b['22'][0]++,!hit)&&(__cov_AojWIMzrImwRuzTqAtJZiA.b['22'][1]++,this.get('host').selectionContainsNode(n))){__cov_AojWIMzrImwRuzTqAtJZiA.b['21'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['117']++;hits.push(n);}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['21'][1]++;}},this);__cov_AojWIMzrImwRuzTqAtJZiA.s['118']++;if(hits.length>0){__cov_AojWIMzrImwRuzTqAtJZiA.b['23'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['119']++;return hits;}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['23'][1]++;}__cov_AojWIMzrImwRuzTqAtJZiA.s['120']++;hit=node.ancestor('a');__cov_AojWIMzrImwRuzTqAtJZiA.s['121']++;if(hit){__cov_AojWIMzrImwRuzTqAtJZiA.b['24'][0]++;__cov_AojWIMzrImwRuzTqAtJZiA.s['122']++;return[hit];}else{__cov_AojWIMzrImwRuzTqAtJZiA.b['24'][1]++;}__cov_AojWIMzrImwRuzTqAtJZiA.s['123']++;return[];}},{ATTRS:{enabled_templates:{values:['component_one_column','component_subcomponent_one_column','subcomponent_one_column']}}});},'@VERSION@',{'requires':['moodle-editor_atto-plugin']});
